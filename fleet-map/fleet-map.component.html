<div class="fleet-map-wrapper relative">
  <!-- Map Header -->
  <div class="fleet-map-header bg-[#7DD3C8] p-2 text-white flex items-center">
    <span>Fleet Level Map -AIS Positions</span>
    <div class="ml-2 items-center justify-center">
      <svg
        width="19"
        height="18"
        viewBox="0 0 19 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M9.5 0.200195C14.6466 0.200195 18.7998 4.14995 18.7998 9C18.7998 13.8501 14.6466 17.7998 9.5 17.7998C4.35343 17.7998 0.200195 13.8501 0.200195 9C0.200195 4.14995 4.35343 0.200195 9.5 0.200195Z"
          fill="#F2F4FF"
          stroke="#F69230"
          stroke-width="0.4"
        />
        <g clip-path="url(#clip0_612_4176)">
          <path
            d="M12 9.375H10.6875C10.4469 9.375 10.25 9.17812 10.25 8.9375C10.25 8.69688 10.4469 8.5 10.6875 8.5H12C12 8.5 13.3125 7.03711 13.3125 6.3125C13.3125 5.58789 12.7246 5 12 5C11.2754 5 10.6875 5.58789 10.6875 6.3125C10.6875 6.66113 10.991 7.1793 11.3068 7.625H10.6875C9.96426 7.625 9.375 8.21426 9.375 8.9375C9.375 9.66074 9.96426 10.25 10.6875 10.25H12C12.2406 10.25 12.4375 10.4469 12.4375 10.6875C12.4375 10.9281 12.2406 11.125 12 11.125H8.84863C8.62988 11.4641 8.38652 11.7771 8.20195 12H12C12.7232 12 13.3125 11.4107 13.3125 10.6875C13.3125 9.96426 12.7232 9.375 12 9.375ZM12 5.875C12.242 5.875 12.4375 6.07051 12.4375 6.3125C12.4375 6.55449 12.242 6.75 12 6.75C11.758 6.75 11.5625 6.55449 11.5625 6.3125C11.5625 6.07051 11.758 5.875 12 5.875ZM7.625 8.5C6.90039 8.5 6.3125 9.08789 6.3125 9.8125C6.3125 10.5371 7.625 12 7.625 12C7.625 12 8.9375 10.5371 8.9375 9.8125C8.9375 9.08789 8.34961 8.5 7.625 8.5ZM7.625 10.25C7.38301 10.25 7.1875 10.0545 7.1875 9.8125C7.1875 9.57051 7.38301 9.375 7.625 9.375C7.86699 9.375 8.0625 9.57051 8.0625 9.8125C8.0625 10.0545 7.86699 10.25 7.625 10.25Z"
            fill="#F69230"
          />
        </g>
        <defs>
          <clipPath id="clip0_612_4176">
            <rect
              width="7"
              height="7"
              fill="white"
              transform="translate(6.3125 5)"
            />
          </clipPath>
        </defs>
      </svg>
    </div>
  </div>

  <!-- Map Container -->
  <div class="map-content-container relative h-[400px]">
    <div #map class="map-container w-full h-full"></div>

    <!-- Vessel Info Panel -->
    <div
      *ngIf="showSidePanel"
      class="w-[23%] absolute top-1/4 right-24 bg-white shadow-lg rounded-md w-64 overflow-hidden border border-primary-500"
    >
      <!-- Panel Header -->
      <div class="bg-[#DBDFF6] p-1 flex items-center justify-between">
        <div class="flex items-center">
          <h2 class="text-[#27187E] text-base font-bold h-6 mt-3 ml-1">
            Fleet Level Map - AIS Positions
          </h2>
          <div class="ml-2 items-center justify-center">
            <svg
              width="19"
              height="18"
              viewBox="0 0 19 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M9.5 0.200195C14.6466 0.200195 18.7998 4.14995 18.7998 9C18.7998 13.8501 14.6466 17.7998 9.5 17.7998C4.35343 17.7998 0.200195 13.8501 0.200195 9C0.200195 4.14995 4.35343 0.200195 9.5 0.200195Z"
                fill="#F2F4FF"
                stroke="#F69230"
                stroke-width="0.4"
              />
              <g clip-path="url(#clip0_612_4176)">
                <path
                  d="M12 9.375H10.6875C10.4469 9.375 10.25 9.17812 10.25 8.9375C10.25 8.69688 10.4469 8.5 10.6875 8.5H12C12 8.5 13.3125 7.03711 13.3125 6.3125C13.3125 5.58789 12.7246 5 12 5C11.2754 5 10.6875 5.58789 10.6875 6.3125C10.6875 6.66113 10.991 7.1793 11.3068 7.625H10.6875C9.96426 7.625 9.375 8.21426 9.375 8.9375C9.375 9.66074 9.96426 10.25 10.6875 10.25H12C12.2406 10.25 12.4375 10.4469 12.4375 10.6875C12.4375 10.9281 12.2406 11.125 12 11.125H8.84863C8.62988 11.4641 8.38652 11.7771 8.20195 12H12C12.7232 12 13.3125 11.4107 13.3125 10.6875C13.3125 9.96426 12.7232 9.375 12 9.375ZM12 5.875C12.242 5.875 12.4375 6.07051 12.4375 6.3125C12.4375 6.55449 12.242 6.75 12 6.75C11.758 6.75 11.5625 6.55449 11.5625 6.3125C11.5625 6.07051 11.758 5.875 12 5.875ZM7.625 8.5C6.90039 8.5 6.3125 9.08789 6.3125 9.8125C6.3125 10.5371 7.625 12 7.625 12C7.625 12 8.9375 10.5371 8.9375 9.8125C8.9375 9.08789 8.34961 8.5 7.625 8.5ZM7.625 10.25C7.38301 10.25 7.1875 10.0545 7.1875 9.8125C7.1875 9.57051 7.38301 9.375 7.625 9.375C7.86699 9.375 8.0625 9.57051 8.0625 9.8125C8.0625 10.0545 7.86699 10.25 7.625 10.25Z"
                  fill="#F69230"
                />
              </g>
              <defs>
                <clipPath id="clip0_612_4176">
                  <rect
                    width="7"
                    height="7"
                    fill="white"
                    transform="translate(6.3125 5)"
                  />
                </clipPath>
              </defs>
            </svg>
          </div>
        </div>
        <button
          (click)="closeSidePanel()"
          class="text-[#27187E] border border-primary-500 mr-2"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>

      <!-- Vessel Info Content -->
      <div class="vessel-info">
        <!-- Vessel Name -->
        <div class="p-3 border-b bg-[#F6F6FF]">
          <div class="text-[#27187E] text-xs mb-1">Vessel Name</div>
          <div class="text-[#27187E] text-sm font-bold">
            {{ selectedVessel?.name || "DARLEAKAY" }}
          </div>
        </div>

        <!-- Current Location -->
        <div class="p-3 bg-[#F1F1FA] border-b">
          <div class="text-[#27187E] text-xs mb-1">Current Location</div>
          <div class="text-[#27187E] text-sm font-bold">
            {{ selectedVessel?.currentLocation || "Baltic Sea" }}
          </div>
        </div>

        <!-- Next Port Of Call -->
        <div class="p-3 border-b bg-[#F6F6FF]">
          <div class="text-[#27187E] text-xs mb-1">Next Port Of Call</div>
          <div class="text-[#27187E] text-sm font-bold">
            {{ selectedVessel?.destination || "JPNAS#K CW/C3" }}
          </div>
        </div>

        <!-- ETA - Now always visible -->
        <div class="p-3 bg-[#F1F1FA]">
          <div class="text-[#27187E] text-xs mb-1">ETA</div>
          <div class="text-[#27187E] text-sm font-bold">
            {{ selectedVessel?.eta || "06/01/2025" }}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
